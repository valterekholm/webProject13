<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="header :: headerFragment">
<title id="pageTitle">All books</title>

</head>
<body>
<div th:replace="header :: header"></div>
<main>
<h1>All books in library</h1>
<br/>
<table class="front">
<tr><th>Title</th><th>ISBN</th><th>Author</th><th>Genre</th><th>Location</th><th>Edit</th><th>Delete</th></tr>
<tr th:each="book : ${books}"><td th:text="${book.title}"></td>
<td th:text="${book.isbn}"></td>
<td th:text="${book.author}"></td>
<td th:if="${book.genre != null}" th:text="${book.genre.name}"></td>
<td th:if="${book.genre == null}" th:text="${'-'}"></td>
<td th:text="${book.location.name}"></td>
<td><a th:href="@{'/books/editBook/'+${book.id}}"><img th:src="@{/img/pen.png}" alt="edit" /></a></td>
<td><a href="#" th:id="${book.id}" onClick="sendFormX(this.id);"><img th:src="@{/img/X.png}" alt="delete" /></a></td></tr>
</table>
<span th:text="${message}" id="message">Message</span>
</main>

<form name="myform" th:action="@{/books/deleteBook}" method="post" class="hidden">
  <label for="id">Search:</label>
  <input type="hidden" name="id" id="id"/>
</form>
<script>
function sendFormX(bookId){
	document.querySelector("form[name='myform']  > input").value = bookId;
	document.querySelector("form[name='myform']").submit();
}

</script>
</body>
</html>