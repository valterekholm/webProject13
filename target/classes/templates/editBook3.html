<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="header :: headerFragment">
<title id="pageTitle">Edit book</title>
</head>
<body>
<div th:replace="header :: header"></div>
<main>
<h1>Edit book (2)</h1>
<form action="#" th:action="@{/books/editBook}" th:object="${book}" method="post" id="addBookForm">
<p><label for="title">Title:</label><input type="text" th:field="*{title}" /></p>
<p><label for="isbn">ISBN:</label><input type="text" th:field="*{isbn}" /></p>
<p><label for="author">Author:</label><input type="text" th:field="*{author}" /></p>
<p><label for="genre">Genre:</label><select th:field="*{genre}" id="genre" name="genre">
<option th:each="genre : ${genres}" th:value="${genre.name}" th:text="${genre.name}" th:selected="(${genre.name} == ${genre_})"></option>
</select><!-- form input[type="select"]:disabled th:if="${book.genre != null}" -->
<label for="noGenre">No genre</label><input type="checkbox" name="noGenre" id="noGenre" th:checked="${book.genre == null}">
</p>
<p><label for="location">Location:</label><select th:field="*{location}">
<option th:each="location : ${locations}" th:value="${location.name}" th:text="${location.name}" th:title="${location.description}"></option>
</select></p>
<p><label></label><input type="submit" value="Update" /> </p>
</form>
<span th:text="${message}" id="message">Message</span>
</main>

<script>

//when starting check if noGenre is checked, if so, make genre disabled
window.onload = function(){
/* 	if(document.getElementById("noGenre")){
		var checkb = document.getElementById("noGenre");
		if(checkb.checked){
			if(document.getElementById("genre")){
				var select = document.getElementById("genre");
				select.disabled = true;
			}
		}
	} */

	applyNoGenres("addBookForm");
}

</script>
</body>
</html>